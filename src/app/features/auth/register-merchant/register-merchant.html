<div class="signup-page">
  <div class="signup-container">

    <!-- Panel gauche : marketing only -->
    <div class="left-panel">
      <div class="brand">
        <img src="assets/images/logo.jpg" alt="Tawsila logo">
        <h1>Tawsila Business</h1>
        <p>Grow your business with us</p>
      </div>

      <div class="features">
        <div class="feature">üè™ <span>List your products & services</span></div>
        <div class="feature">üöÄ <span>Fast delivery to your customers</span></div>
       
       
      </div>

      <div class="notice-panel">
        ‚ö†Ô∏è Your account will require admin validation before activation.
      </div>
    </div>

    <!-- Panel droit : formulaire long scrollable -->
    <div class="right-panel">
      <div class="form-box">

        <h2>Register as Merchant</h2>
        <p class="subtitle">Create your business account</p>

        <div class="success-box" *ngIf="successMessage()">
          <div class="success-icon">‚úÖ</div>
          <p>{{ successMessage() }}</p>
          <button class="btn-login" (click)="goToLogin()">Go to Login</button>
        </div>

        <div class="error" *ngIf="error()">‚ö†Ô∏è {{ error() }}</div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!successMessage()">

          <!-- Logo upload centr√© avec ic√¥ne -->
          <div class="logo-upload-center">
            <div class="logo-circle" (click)="fileInput.click()">
              <img *ngIf="previewUrl()" [src]="previewUrl()" alt="Logo">
              <div *ngIf="!previewUrl()" class="logo-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 7a2 2 0 012-2h2.586a1 1 0 01.707.293l1.414 1.414A1 1 0 0010.414 7H21a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/>
                  <circle cx="12" cy="13" r="2.5" stroke-linecap="round"/>
                </svg>
                <span>Upload logo</span>
              </div>
              <div class="logo-hover-overlay">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="white" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 7a2 2 0 012-2h2.586a1 1 0 01.707.293l1.414 1.414A1 1 0 0010.414 7H21a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/>
                  <circle cx="12" cy="13" r="2.5"/>
                </svg>
                <span>Change</span>
              </div>
            </div>
            <p class="logo-hint">Optional ‚Äî click to upload your logo</p>
            <input #fileInput type="file" accept="image/*" hidden (change)="onImageSelected($event)">
          </div>

          <!-- Business Info -->
          <div class="section-label"> Business Information</div>

          <input type="text" formControlName="nomEntreprise"
            placeholder="Business Name *"
            [class.err]="form.get('nomEntreprise')?.invalid && form.get('nomEntreprise')?.touched">
          <span class="field-error" *ngIf="form.get('nomEntreprise')?.invalid && form.get('nomEntreprise')?.touched">
            Required (min. 2 characters)
          </span>

          <select formControlName="typeActivite"
            [class.err]="form.get('typeActivite')?.invalid && form.get('typeActivite')?.touched">
            <option value="">Activity Type </option>
            <option *ngFor="let opt of typeActiviteOptions" [value]="opt.value">{{ opt.label }}</option>
          </select>
          <span class="field-error" *ngIf="form.get('typeActivite')?.invalid && form.get('typeActivite')?.touched">
            Required
          </span>

          <!-- Address -->
          <div class="section-label"> Address</div>

          <input type="text" formControlName="address" placeholder="Street address">

          <div class="fields-row">
            <input type="text" formControlName="city" placeholder="City">
            <input type="text" formControlName="codePostal" placeholder="Postal code">
          </div>

          <!-- Contact -->
          <div class="section-label"> Contact</div>

          <input type="email" formControlName="email"
            placeholder="Email *"
            [class.err]="form.get('email')?.invalid && form.get('email')?.touched">
          <span class="field-error" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
            Valid email required
          </span>

          <input type="tel" formControlName="telephone"
            placeholder="Phone *"
            [class.err]="form.get('telephone')?.invalid && form.get('telephone')?.touched">

          <!-- Security -->
          <div class="section-label"> Security</div>

          <input [type]="showPassword() ? 'text' : 'password'"
            formControlName="motDePasse"
            placeholder="Password (min. 6 characters) *"
            [class.err]="form.get('motDePasse')?.invalid && form.get('motDePasse')?.touched">
          <span class="field-error" *ngIf="form.get('motDePasse')?.invalid && form.get('motDePasse')?.touched">
            Minimum 6 characters
          </span>

          <input [type]="showPassword() ? 'text' : 'password'"
            formControlName="confirmerMotDePasse"
            placeholder="Confirm password *"
            [class.err]="form.hasError('passwordMismatch') && form.get('confirmerMotDePasse')?.touched">
          <span class="field-error"
            *ngIf="form.hasError('passwordMismatch') && form.get('confirmerMotDePasse')?.touched">
            Passwords do not match
          </span>

          
          <button type="submit" [disabled]="loading()">
            {{ loading() ? ' Creating...' : ' Create merchant account' }}
          </button>

        </form>

        <div class="footer-link">
          Already have an account? <a (click)="goToLogin()">Sign in</a>
          <span class="sep"> ¬∑ </span>
         
        </div>

      </div>
    </div>

  </div>
</div>